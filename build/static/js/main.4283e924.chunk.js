(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{205:function(e,t,a){e.exports=a(384)},210:function(e,t,a){},228:function(e,t,a){},299:function(e,t,a){},343:function(e,t,a){},384:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(58),s=a.n(l),i=(a(210),a(19)),o=a(23),c=a(25),u=a(20),m=a(24),d=a(193),g=a(407),h=a(413),p=a(399),v=a(409),E=a(136);E.a.initialize("UA-132749138-1");var f={settSidevisning:function(e){E.a.pageview(e)},settEvent:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Label ikke satt";E.a.event({category:e,action:t,label:a})}},b=a(39),k=a(394),j=a(410),O=a(408),y=a(395),C=a(173).initializeApp({apiKey:"AIzaSyC14w-B83CrpmAYgZv6yLoFlc58Xs-rDuw",authDomain:"matioslo.firebaseapp.com",databaseURL:"https://matioslo.firebaseio.com",projectId:"840417479946",storageBucket:"",messagingSenderId:"matioslo"}),R=C.database().ref("/restaurants"),S={getTopRestaurants:function(e,t,a){R.orderByChild(e).limitToFirst(t).once("value",function(e){var t=[];e.forEach(function(e){t.push(e.val())}),a(t.reverse())})},getAllRestaurants:function(e){R.once("value",function(t){e(t.val())})},getRestaurant:function(e,t){R.child(e).once("value",function(e){t(e.val())})}},w=(a(228),function(){return r.a.createElement(O.a,{className:"velkommen"},r.a.createElement("h1",null,"Hvor skal vi spise?"),r.a.createElement("p",{className:"om"},"Kjenner du deg igjen i problemstillingen? Dere skal ut \xe5 spise, men vet ikke hvor. I forrige uke hadde dere mange ideer, men n\xe5 n\xe5r dere skal bestemme dere for et sted er det umulig \xe5 finne en passende restaurant."))}),F=a(401),I=a(412),D=a(107),T=(a(299),function(e){var t=e.restaurants,a=e.title,n=e.loading,l="";return l=t.length>0||n?r.a.createElement(F.a.Group,null," ",t.map(function(e){var t=new Date(e.lastVisited).toLocaleDateString();return r.a.createElement(F.a,{key:e.name},r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,null,e.name),r.a.createElement(F.a.Meta,null,r.a.createElement(I.a,{icon:"heart",defaultRating:e.score,maxRating:6,disabled:!0})),r.a.createElement(F.a.Meta,null,e.category),r.a.createElement(F.a.Meta,null,e.address?r.a.createElement("span",null,r.a.createElement(D.a,{name:"map"}),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(e.address))},e.address)):"Ingen adresse tilgjengelig"),r.a.createElement(F.a.Description,null,e.comment?e.comment:"Ingen kommentar lagt inn."),r.a.createElement(F.a.Extra,null,e.homepage?r.a.createElement("a",{href:e.homepage,target:"_blank",rel:"noopener noreferrer"},e.homepage):"Ingen nettside lagt til."),r.a.createElement(F.a.Meta,null,"Bes\xf8kt: ",t)))}),r.a.createElement("p",null,r.a.createElement("a",{href:"#/restauranter"},"Se alle restauranter"))):r.a.createElement("p",null,"Det er ingen restauranter i databasen forel\xf8pig. Logg inn og legg til en restaurant!"),r.a.createElement("div",null,r.a.createElement("h1",null,a),l)}),L=a(406);f.settSidevisning("/loggut");var A=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement(L.a,{inverted:!0,fluid:!0},r.a.createElement(L.a.Item,{name:"hjem",href:"/"},"Hjem"),r.a.createElement(L.a.Item,{name:"allerestauranter",href:"#/restauranter"},"Alle restauranter"),t?r.a.createElement(L.a.Item,{name:"opprett",href:"#/opprett"},"Legg til restaurant"):"",t?r.a.createElement(L.a.Item,{name:"Logg ut",onClick:function(){f.settEvent("User","Bruker logget ut","Utlogging"),C.auth().signOut(),e.props.history.push("/")}},"Logg ut"):r.a.createElement(L.a.Item,{name:"Logg inn",href:"#/logginn"},"Logg inn"))}}]),t}(n.Component),V=a(393),B=a(411),N=(a(343),Object(B.a)(function(e){var t=e.user,a=e.history;return r.a.createElement("header",{className:"header"},r.a.createElement(V.a,{className:"header-title",as:"a",to:"/"},r.a.createElement(D.a,{name:"food"}),"Mat i Oslo"),r.a.createElement(A,{user:t,history:a}))})),x=function(e){return e?Object.keys(e).map(function(t){return e[t]}):[]},H=5,M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getTopRestaurants=function(){S.getTopRestaurants("score",H,function(e){a.setState(Object(b.a)({},a.state,{topRestaurants:x(e),loadingTopRestaurants:!1,active:!1}))})},a.getLastVisitedRestaurants=function(){S.getTopRestaurants("lastVisited",H,function(e){a.setState(Object(b.a)({},a.state,{lastVisitedRestaurants:x(e),loadingLastVisitedRestaurants:!1,active:!1}))})},a.state={topRestaurants:[],lastVisitedRestaurants:[],loadingTopRestaurants:!0,loadingLastVisitedRestaurants:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getTopRestaurants(),this.getLastVisitedRestaurants()}},{key:"render",value:function(){var e=this.state,t=e.topRestaurants,a=e.lastVisitedRestaurants,n=e.loadingTopRestaurants,l=e.loadingLastVisitedRestaurants;return r.a.createElement("div",null,r.a.createElement(N,{user:this.props.user}),r.a.createElement(k.a,null,r.a.createElement(w,null),r.a.createElement(j.a,{stackable:!0,columns:2},r.a.createElement(j.a.Column,null,r.a.createElement(O.a,null,r.a.createElement(y.a,{active:n}),r.a.createElement("div",{className:"forside"},r.a.createElement(T,{restaurants:t,title:"Topp ".concat(H," restauranter"),loading:n})))),r.a.createElement(j.a.Column,null,r.a.createElement(O.a,null,r.a.createElement(y.a,{active:l}),r.a.createElement("div",{className:"forside"},r.a.createElement(T,{restaurants:a,title:"Siste ".concat(H," bes\xf8kte"),loading:l})))))))}}]),t}(n.Component),U=a(59),P=a(194),q=a(404),K=a(400),z=a(405),W=function(e){var t=e.error,a=e.loggInn,l=Object(n.useState)({username:"",password:""}),s=Object(P.a)(l,2),i=s[0],o=s[1],c=function(e){var t=e.target.name,a=e.target.value;o(Object(b.a)({},i,Object(U.a)({},t,a)))},u=i.username,m=i.password,d="";return t&&(d=r.a.createElement(q.a,{warning:!0},r.a.createElement(q.a.Header,null,"Det var et problem med p\xe5loggingen"),r.a.createElement("p",null,t))),r.a.createElement("div",null,r.a.createElement(K.a,null,r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Brukernavn"),r.a.createElement("input",{placeholder:"Brukernavn",name:"username",onChange:c})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Passord"),r.a.createElement("input",{type:"password",placeholder:"Passord",name:"password",onChange:c})),r.a.createElement(z.a,{type:"submit",onClick:function(){return a(u,m)}},"Logg inn")),d)};f.settSidevisning("/logginn");var J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:""},a.loggInn=function(e,t){C.auth().signInWithEmailAndPassword(e,t).then(function(e){f.settEvent("User","Bruker logget inn.","Innlogging"),a.props.history.push("/")}).catch(function(){a.setState({error:"Det var et problem med innloggingen. Sjekk at du bruker riktig brukernavn og passord."}),f.settEvent("User","Hadde problemer med \xe5 logge inn","Innlogging")})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,{user:this.props.user}),r.a.createElement(k.a,null,r.a.createElement(W,{loggInn:this.loggInn,error:this.state.error})))}}]),t}(n.Component),_=a(85),G=a(403),Q=a(396),X=a(397),Y=a(398),Z=function(e){return e.map(function(e){return{value:e,text:e,key:e}})},$=Z(["Amerikansk","Asiatisk","BBQ","Indisk","Italiensk","Nordisk","Thai"]),ee=Z(["Billig","Medium","Dyrt"]),te=Z(["D\xe5rlig","Helt grei","Bra","Eksemplarisk"]),ae=function(e){var t=e.errors;return r.a.createElement(G.a,{celled:!0},t.map(function(e,t){return r.a.createElement(G.a.Item,{key:t},e)}))},ne=function(e){var t=e.title,a=e.status;return r.a.createElement(q.a,{info:!0},r.a.createElement(q.a.Header,null,t),r.a.createElement("p",null,a))},re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;"score"===n&&(r=parseInt(r)),a.setState({data:Object(b.a)({},a.state.data,Object(U.a)({},n,r))},function(){return a.validateForm()})},a.validateForm=function(){var e=a.state.data,t=e.name,n=e.category,r=e.price,l=e.service,s=e.score,i=e.lastVisited,o=[];return a.empty(t)&&o.push("Navn kan ikke v\xe6re tom"),a.empty(n)&&o.push("Kategori kan ikke v\xe6re tom"),a.empty(r)&&o.push("Pris kan ikke v\xe6re tom"),a.empty(l)&&o.push("Service kan ikke v\xe6re tom"),a.empty(s)&&o.push("Score kan ikke v\xe6re tom"),a.empty(i)&&o.push("Dato bes\xf8kt m\xe5 v\xe6re satt"),o.length>0?(a.setState({data:Object(b.a)({},a.state.data),errors:o}),!1):(a.setState({data:Object(b.a)({},a.state.data),errors:[]}),!0)},a.saveToDb=function(){if(a.validateForm()){f.settEvent("User","Restaurant ble lagret i databasen","Opprettelse av restaurant");var e="".concat(a.state.data.name," ble lagret i databasen");a.props.saveToDb(a.state.data,function(t){t&&(e="Det var et problem ved lagring til databasen"),a.setState({data:{name:"",category:"",price:"",service:"",score:3,address:"",comment:"",homepage:"",lastVisited:""},errors:[],status:e})})}},a.empty=function(e){return""===e||void 0===e||null===e},a.state={data:{name:"",category:"",price:"",service:"",score:3,address:"",comment:"",homepage:"",lastVisited:""},errors:[],status:""},a.handleChange=a.handleChange.bind(Object(_.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.status,n=e.data,l=n.name,s=n.price,i=n.service,o=n.comment,c=n.category,u=n.score,m=n.address,d=n.homepage,g=n.lastVisited;return r.a.createElement("div",null,a?r.a.createElement(ne,{title:"Informasjon",status:a,name:l}):"",t.length>0?r.a.createElement(ae,{errors:t}):"",r.a.createElement(K.a,{name:"restaurantform",onSubmit:this.saveToDb},r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Navn p\xe5 restaurant"),r.a.createElement(Q.a,{onChange:this.handleChange,placeholder:"Navn p\xe5 restaurant",name:"name",value:l})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Type restaurant"),r.a.createElement(X.a,{onChange:this.handleChange,placeholder:"Hvilken type restaurant er dette?",name:"category",options:$,required:!0,value:c})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Pris"),r.a.createElement(X.a,{onChange:this.handleChange,placeholder:"Prismessig",name:"price",options:ee,required:!0,value:s})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Service"),r.a.createElement(X.a,{onChange:this.handleChange,placeholder:"Hvordan var servicen?",name:"service",options:te,required:!0,value:i})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Totalscore"),r.a.createElement(Q.a,{onChange:this.handleChange,type:"number",step:"1",name:"score",value:u,min:"1",max:"6",required:!0})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"N\xe5r var bes\xf8ket?"),r.a.createElement(Q.a,{type:"date",name:"lastVisited",value:g,onChange:this.handleChange})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Adresse"),r.a.createElement(Q.a,{type:"text",name:"address",value:m,onChange:this.handleChange})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Hjemmeside"),r.a.createElement(Q.a,{type:"text",value:d,name:"homepage",onChange:this.handleChange})),r.a.createElement(K.a.Field,null,r.a.createElement("label",null,"Kommentar"),r.a.createElement(Y.a,{name:"comment",cols:"30",rows:"10",onChange:this.handleChange,value:o})),r.a.createElement(z.a,{type:"submit"},"Lagre")))}}]),t}(n.Component);f.settSidevisning("/opprettRestaurant");var le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).saveRestaurantToDb=function(e,t){e.registered=(new Date).getTime(),a.ref.child(e.name).set(e,function(e){t(e||null)})},a.state={restaurantToEdit:null},a.ref=C.database().ref("restaurants"),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.restaurant;t&&S.getRestaurant(t,function(t){e.setState({restaurantToEdit:t})})}},{key:"render",value:function(){return this.props.user?r.a.createElement("div",null,r.a.createElement(N,{user:this.props.user}),r.a.createElement(k.a,null,r.a.createElement("h1",null,"Legg til en restaurant"),r.a.createElement(re,{saveToDb:this.saveRestaurantToDb,restaurantToEdit:this.state.restaurantToEdit}))):r.a.createElement(v.a,{to:"/logginn"})}}]),t}(r.a.Component),se=function(e){var t=e.onChange,a=e.resetFilter,n=e.value;return r.a.createElement(O.a,null,r.a.createElement("h3",null,"Filtrer restaurantene"),r.a.createElement("div",{className:"restaurant-filter"},r.a.createElement(X.a,{placeholder:"Filtrer p\xe5 kategori",options:$,onChange:t,name:"kategoriFilter",value:n}),r.a.createElement(z.a,{onClick:a},"Fjern filter")))};f.settSidevisning("/alleRestauranter");var ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getAllRestaurants=function(){S.getAllRestaurants(function(e){a.setState({restaurants:x(e),filteredRestaurants:x(e),loading:!1})})},a.filterRestaurants=function(e){return e?a.state.restaurants.filter(function(t){return t.category===e}):a.state.restaurants},a.setFilter=function(e,t){t.name;var n=t.value;a.setState({filter:n})},a.resetFilter=function(){a.setState({filter:""})},a.state={restaurants:[],filter:"",loading:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllRestaurants()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,{user:this.props.user,history:this.props.history}),r.a.createElement(k.a,null,r.a.createElement(y.a,{active:this.state.loading}),r.a.createElement(se,{onChange:this.setFilter,resetFilter:this.resetFilter,value:this.state.filter}),r.a.createElement(T,{restaurants:this.filterRestaurants(this.state.filter),title:"Alle restaurantene"})))}}]),t}(n.Component),oe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log(this.props.match),r.a.createElement("h1",null,"Hello")}}]),t}(n.Component);Object(B.a)(oe);f.settSidevisning("/forside"),d.init({dsn:"https://36442b1db81841dc8855223350ed7ed7@sentry.io/1374858"});var ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).authListener=function(){a.firebase.auth().onAuthStateChanged(function(e){e?a.setState({user:e}):a.setState({user:null})})},a.state={user:{}},a.firebase=C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement(g.a,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(M,Object.assign({},t,{user:e}))}}),r.a.createElement(p.a,{path:"/opprett",exact:!0,render:function(t){return r.a.createElement(le,Object.assign({},t,{user:e}))}}),r.a.createElement(p.a,{path:"/logginn",exact:!0,render:function(t){return r.a.createElement(J,Object.assign({},t,{user:e}))}}),r.a.createElement(p.a,{path:"/restauranter",exact:!0,render:function(t){return r.a.createElement(ie,Object.assign({},t,{user:e}))}}),r.a.createElement(v.a,{to:"/"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[205,2,1]]]);
//# sourceMappingURL=main.4283e924.chunk.js.map